import React, { useEffect, useState } from "react";
import { NavLink, Outlet } from "react-router-dom";
import { baseStyle } from "../assets/styles/index";
import logoPanti from "../assets/Icons/logo-panti.svg";
import logoutImg from "../assets/Icons/logout.svg";
import { useAuth } from "../context/AuthContext";

import PengurusPanti from "../assets/Icons/pengurus-panti.svg";

export default function RootLayoutAdmin() {
  const { logout, currentUser } = useAuth();
  const [namaPanti, setNamaPanti] = useState("");

  const userId = currentUser.uid;

  useEffect(() => {
    async function getDataPanti() {
      try {
        const res = await fetch(
          `http://127.0.0.1:3000/profiles/user/${userId}`
        );
        if (!res.ok) {
          setNamaPanti("");
          return;
        }
        const data = await res.json();
        setNamaPanti(data[0].nama_panti);
      } catch (error) {
        console.log(error);
      }
    }
    getDataPanti();
  }, [userId]);

  return (
    <>
      <header className="shadow-lg">
        <nav
          className={`${baseStyle} flex justify-between items-center w-full h-[75px]`}
        >
          <img src={logoPanti} alt="Logo website panti" className="w-[200px]" />
          <ul className="flex justify-between gap-14 font-semibold text-xl text-[#767272]">
            <li className="flex gap-1 items-center">
              <img src={logoutImg} className="w-[22px] h-[22px]" alt="" />
              <button className="text-lg" onClick={logout}>
                Keluar Akun
              </button>
            </li>
          </ul>
        </nav>
      </header>
      <div className="bg-light-pink min-h-screen py-8">
        <div className={`${baseStyle} flex gap-10`}>
          <aside className="font-semibold">
            <div className="flex items-center gap-4 border border-border-color bg-white rounded-lg shadow-lg px-8 py-6 w-[260px] mb-6">
              <img src={PengurusPanti} alt="" />
              <p>{namaPanti}</p>
            </div>
            <div className="w-[260px] px-4 py-1 border border-border-color bg-white rounded-lg shadow-lg divide-y-2 divide-[#E5DCDC]">
              <div>
                <NavLink
                  to="profile"
                  className={({ isActive }) =>
                    isActive ? "text-pink" : undefined
                  }
                >
                  <div className="flex items-center gap-4 px-3 py-4">
                    <svg
                      className="w-[35px] h-[34px]"
                      fill="none"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M2.00002 21.154C2.00002 16.6893 6.07022 15.0002 10 15.0002C11.2829 15.0002 12.5807 15.1802 13.7471 15.578"
                        stroke="currentColor"
                        strokeLinecap="round"
                        strokeWidth="1.6px"
                      />
                      <path
                        d="M14.3076 7.23664C14.3076 9.74643 14.0204 12.5384 9.99989 12.5384C5.9794 12.5384 5.6922 9.74643 5.6922 7.23664C5.6922 4.72685 7.62082 2.69226 9.99989 2.69226C12.379 2.69226 14.3076 4.72685 14.3076 7.23664Z"
                        stroke="currentColor"
                        strokeWidth="1.6px"
                      />
                      <path
                        d="M14.4213 18.3197L19.3957 12.4213L20.0459 12.2487L21.8155 13.7411L21.7551 14.4112L16.7808 20.3095L14.1798 20.9998L14.4213 18.3197Z"
                        stroke="currentColor"
                        strokeWidth="1.6px"
                      />
                      <path
                        d="M18.4635 13.3828L20.885 15.5353"
                        stroke="currentColor"
                        strokeWidth="1.6px"
                      />
                    </svg>
                    <p>Profile</p>
                  </div>
                </NavLink>
              </div>
              <div>
                <NavLink
                  to="status-panti"
                  className={({ isActive }) =>
                    isActive ? "text-pink" : undefined
                  }
                >
                  <div className="flex items-center gap-4 px-4 py-5">
                    <svg
                      viewBox="0 0 30 30"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                      className="w-[28px] h-[28px]"
                    >
                      <path
                        d="M15 30C13.5 30 12.375 28.75 11.5 27.75C11 27.25 10.5 26.625 10.25 26.5C9.875 26.375 9 26.375 8.375 26.375C7 26.5 5.5 26.5 4.5 25.5C3.5 24.5 3.5 22.875 3.625 21.625C3.625 20.875 3.75 20.125 3.5 19.75C3.375 19.375 2.75 18.875 2.25 18.5C1.25 17.625 0 16.5 0 15C0 13.5 1.25 12.375 2.25 11.5C2.75 11 3.375 10.5 3.5 10.25C3.625 9.875 3.625 9 3.625 8.375C3.5 7 3.5 5.5 4.5 4.5C5.5 3.5 7.125 3.5 8.375 3.625C9.125 3.625 9.875 3.75 10.25 3.5C10.625 3.375 11.125 2.75 11.5 2.25C12.375 1.25 13.5 0 15 0C16.5 0 17.625 1.25 18.5 2.25C19 2.75 19.5 3.375 19.75 3.5C20.125 3.625 21 3.625 21.625 3.625C23 3.5 24.5 3.5 25.5 4.5C26.5 5.5 26.5 7.125 26.375 8.375C26.375 9.125 26.25 9.875 26.5 10.25C26.625 10.625 27.25 11.125 27.75 11.5C28.75 12.375 30 13.5 30 15C30 16.5 28.75 17.625 27.75 18.5C27.25 19 26.625 19.5 26.5 19.75C26.375 20.125 26.375 21 26.375 21.625C26.5 23 26.5 24.5 25.5 25.5C24.5 26.5 22.875 26.5 21.625 26.375C20.875 26.375 20.125 26.25 19.75 26.5C19.375 26.625 18.875 27.25 18.5 27.75C17.625 28.75 16.5 30 15 30ZM9.375 23.875C10 23.875 10.625 24 11.25 24.125C12.125 24.5 12.875 25.25 13.5 26C14 26.625 14.75 27.375 15.125 27.375C15.5 27.375 16.25 26.625 16.75 26C17.375 25.25 18.125 24.5 19 24.125C19.875 23.75 21 23.75 22 23.875C22.75 23.875 23.75 24 24 23.75C24.25 23.5 24.125 22.5 24.125 21.75C24 20.75 24 19.625 24.375 18.75C24.75 17.875 25.5 17.125 26.25 16.5C26.75 16.125 27.5 15.375 27.5 15C27.5 14.625 26.75 13.875 26.125 13.375C25.375 12.75 24.625 12 24.25 11.125C23.875 10.25 23.875 9.125 24 8.125C24 7.375 24.125 6.375 23.875 6.125C23.625 5.875 22.625 6 21.875 6C20.875 6.125 19.75 6.125 18.875 5.75C18 5.375 17.25 4.625 16.625 3.875C16.125 3.25 15.375 2.5 15 2.5C14.625 2.5 13.875 3.25 13.375 3.875C12.75 4.625 12 5.375 11.125 5.75C10.25 6.125 9.125 6.125 8.125 6C7.375 6 6.375 5.875 6.125 6.125C5.875 6.375 6 7.375 6 8.125C6.125 9.125 6.125 10.25 5.75 11.125C5.375 12 4.625 12.75 3.875 13.375C3.25 13.875 2.5 14.625 2.5 15C2.5 15.375 3.25 16.125 3.875 16.625C4.625 17.25 5.375 18 5.75 18.875C6.125 19.75 6.125 20.875 6 21.875C6 22.625 5.875 23.625 6.125 23.875C6.375 24.125 7.375 24 8.125 24C8.5 24 8.875 23.875 9.375 23.875ZM13.75 20.5L9.125 15.875L10.875 14.125L13.75 17L20.375 10.375L22.125 12.125L13.75 20.5Z"
                        fill="currentColor"
                      />
                    </svg>

                    <p>Status Panti</p>
                  </div>
                </NavLink>
              </div>
              {/* <div>
                <NavLink
                  to="donasi-masuk"
                  className={({ isActive }) => isActive ? "text-pink" : undefined}
                >
                  <div className="flex items-center gap-4 px-4 py-5">
                    <svg
                      viewBox="0 0 32 30"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                      className="w-[30px] h-[28px]"
                    >
                      <path
                        d="M16 0C9.69829 0 4.57143 5.17615 4.57143 11.5385C4.57143 17.9008 9.69829 23.0769 16 23.0769C22.3017 23.0769 27.4286 17.9008 27.4286 11.5385C27.4286 5.17615 22.3017 0 16 0ZM16 2.30769C21.0411 2.30769 25.1429 6.44885 25.1429 11.5385C25.1429 16.6281 21.0411 20.7692 16 20.7692C10.9589 20.7692 6.85714 16.6281 6.85714 11.5385C6.85714 6.44885 10.9589 2.30769 16 2.30769ZM14.8571 4.61538V5.98783C14.6914 6.04841 14.5304 6.12244 14.3772 6.20643C14.2241 6.29042 14.0779 6.38519 13.9397 6.49038C13.8015 6.59558 13.6723 6.71099 13.5513 6.83519C13.3094 7.08358 13.1033 7.3669 12.9442 7.67803C12.8646 7.8336 12.7964 7.99687 12.7411 8.16481C12.6304 8.50069 12.5714 8.85865 12.5714 9.23077C12.5714 9.46731 12.5967 9.69862 12.6429 9.92263C12.7352 10.3706 12.9149 10.7889 13.1629 11.1576C13.287 11.3419 13.4269 11.5142 13.5826 11.6714C13.894 11.9858 14.2648 12.2407 14.6741 12.4174C15.0834 12.5941 15.5314 12.6923 16 12.6923C16.1629 12.6923 16.3154 12.7234 16.4531 12.7802C16.5908 12.837 16.7126 12.9205 16.8147 13.0236C16.9169 13.1267 16.9996 13.2497 17.0558 13.3887C17.1121 13.5277 17.1429 13.6817 17.1429 13.8462C17.1429 14.3394 16.8662 14.7417 16.4531 14.9121C16.3154 14.9689 16.1629 15 16 15C15.8371 15 15.6846 14.9689 15.5469 14.9121C15.4092 14.8553 15.2874 14.7718 15.1853 14.6687C14.981 14.4625 14.8571 14.175 14.8571 13.8462H12.5714C12.5714 14.0322 12.5872 14.2157 12.6161 14.3938C12.6449 14.5719 12.6857 14.7442 12.7411 14.9121C12.7964 15.08 12.8646 15.2433 12.9442 15.3989C13.0238 15.5545 13.1151 15.7019 13.2165 15.8428C13.3179 15.9838 13.4304 16.1175 13.5513 16.2417C13.6723 16.3659 13.8015 16.4813 13.9397 16.5865C14.0779 16.6917 14.2241 16.7865 14.3772 16.8705C14.5304 16.9545 14.6914 17.0285 14.8571 17.0891V18.4615H17.1429V17.0891C18.3029 16.6651 19.1821 15.6405 19.3839 14.3938C19.4128 14.2157 19.4286 14.0322 19.4286 13.8462C19.4286 13.6096 19.4033 13.3783 19.3571 13.1543C19.311 12.9303 19.2437 12.7141 19.1562 12.5075C19.0688 12.3009 18.9611 12.1037 18.8371 11.9193C18.713 11.735 18.5731 11.5627 18.4174 11.4055C18.2617 11.2483 18.0911 11.107 17.9085 10.9818C17.7259 10.8566 17.5305 10.7479 17.3259 10.6596C17.1213 10.5712 16.9071 10.5033 16.6853 10.4567C16.4634 10.4101 16.2343 10.3846 16 10.3846C15.8371 10.3846 15.6846 10.3535 15.5469 10.2967C15.4092 10.2399 15.2874 10.1565 15.1853 10.0533C15.0831 9.95021 15.0004 9.82725 14.9442 9.68825C14.8879 9.54925 14.8571 9.39519 14.8571 9.23077C14.8571 9.06635 14.8879 8.91229 14.9442 8.77329C15.0004 8.63428 15.0831 8.51133 15.1853 8.4082C15.2874 8.30508 15.4092 8.2216 15.5469 8.16481C15.6846 8.10802 15.8371 8.07692 16 8.07692C16.6514 8.07692 17.1429 8.57308 17.1429 9.23077H19.4286C19.4286 9.04471 19.4128 8.86125 19.3839 8.68314C19.3551 8.50504 19.3143 8.33275 19.2589 8.16481C18.9268 7.15718 18.1371 6.35129 17.1429 5.98783V4.61538H14.8571ZM0 20.7692V30H2.28571V23.0769H8.43527C7.4627 22.425 6.58409 21.6438 5.8058 20.7692H0ZM26.1942 20.7692C25.4159 21.6438 24.5373 22.425 23.5647 23.0769H29.7143V30H32V20.7692H26.1942ZM4.57143 25.3846V27.6923H27.4286V25.3846H4.57143Z"
                        fill="currentColor"
                      />
                    </svg>
                    <p>Donasi Masuk</p>
                  </div>
                </NavLink>
              </div> */}
              <div>
                <NavLink
                  to="kabar-panti-admin"
                  className={({ isActive }) =>
                    isActive ? "text-pink" : undefined
                  }
                >
                  <div className="flex items-center gap-4 px-4 py-5">
                    <svg
                      viewBox="60 120 400 210"
                      xmlns="http://www.w3.org/2000/svg"
                      className="w-[28px] h-[28px]"
                      fill="currentColor"
                    >
                      <title />
                      <g data-name="1" id="_1">
                        <path d="M357.51,322H301.75a15,15,0,0,1,0-30h55.76a70.13,70.13,0,0,0,0-140.25c-1.89,0-3.9.09-6.14.29a15,15,0,0,1-14.25-7.42,98.17,98.17,0,0,0-181.68,32.6,15,15,0,0,1-15.35,12.47l-1.06,0A51.17,51.17,0,1,0,139,292h74.71a15,15,0,0,1,0,30H139a81.18,81.18,0,0,1-10.56-161.66,128.17,128.17,0,0,1,229.67-38.59A100.13,100.13,0,0,1,357.51,322Z" />
                        <path d="M305.92,266.12a14.94,14.94,0,0,1-10.6-4.4l-37.58-37.57-37.57,37.57A15,15,0,0,1,199,240.51l48.18-48.18a15,15,0,0,1,21.21,0l48.18,48.18a15,15,0,0,1-10.61,25.61Z" />
                        <path d="M257.74,382.69a15,15,0,0,1-15-15V202.94a15,15,0,0,1,30,0V367.69A15,15,0,0,1,257.74,382.69Z" />
                      </g>
                    </svg>
                    <p>Kabar Panti</p>
                  </div>
                </NavLink>
              </div>
              <div>
                <NavLink
                  to="notifikasi"
                  className={({ isActive }) =>
                    isActive ? "text-pink" : undefined
                  }
                >
                  <div className="flex items-center gap-4 px-4 py-5">
                    <svg
                      viewBox="0 0 32 32"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="currentColor"
                      className="w-[28px] h-[28px]"
                    >
                      <title />
                      <g
                        data-name="mail email e-mail letter"
                        id="mail_email_e-mail_letter"
                      >
                        <path d="M28,13a1,1,0,0,0-1,1v8a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V14a1,1,0,0,0-2,0v8a3,3,0,0,0,.88,2.12A3,3,0,0,0,6,25H26a3,3,0,0,0,2.12-.88A3,3,0,0,0,29,22V14A1,1,0,0,0,28,13Z" />
                        <path d="M15.4,18.8a1,1,0,0,0,1.2,0L28.41,9.94a1,1,0,0,0,.3-1.23,3.06,3.06,0,0,0-.59-.83A3,3,0,0,0,26,7H6a3,3,0,0,0-2.12.88,3.06,3.06,0,0,0-.59.83,1,1,0,0,0,.3,1.23ZM6,9H26a.9.9,0,0,1,.28,0L16,16.75,5.72,9A.9.9,0,0,1,6,9Z" />
                      </g>
                    </svg>
                    <p>Notifikasi</p>
                  </div>
                </NavLink>
              </div>
            </div>
          </aside>
          <main className="bg-white border border-border-color rounded-lg w-full">
            <Outlet />
          </main>
        </div>
      </div>
    </>
  );
}
